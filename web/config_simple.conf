# Simple Configuration Testing File
# This file tests webserv configuration features without port conflicts

# Server 1: Main server on port 8080
server {
	listen 8080;
	server_name localhost;
	client_max_body_size 2048;  # 2KB limit
	
	# Custom error pages
	error_page 404 web/www/custom_errors/not_found.html;
	error_page 500 web/www/custom_errors/server_error.html;
	
	# Root location - all methods
	location / {
		root web/www;
		index index.html;
		allow_methods GET POST DELETE;
		autoindex on;
	}
	
	# Test directory location
	location /test {
		root web/www;
		index test.html;
		allow_methods GET POST;
		autoindex on;
	}
	
	# Readonly location - GET only
	location /readonly {
		root web/www;
		allow_methods GET;
		autoindex off;
	}
}

# Server 2: Different port 8081
server {
	listen 8081;
	server_name example.com;
	client_max_body_size 1024;  # 1KB limit
	
	# Root location
	location / {
		root web/www;
		index index.html;
		allow_methods GET POST;
		autoindex on;
	}
	
	# Readonly location - only GET allowed
	location /readonly {
		root web/www;
		allow_methods GET;
		autoindex off;
	}
}

# Server 3: Small body limit on port 8082
server {
	listen 8082;
	server_name testsite.local;
	client_max_body_size 512;  # 512 bytes - very restrictive
	
	# Custom error page
	error_page 404 web/www/test_errors/missing.html;
	
	# Root location 
	location / {
		root web/www;
		index index.html;
		allow_methods GET POST;
		autoindex on;
	}
}

# Server 4: Large body limit on port 8083
server {
	listen 8083;
	server_name virtual1.test;
	client_max_body_size 4096;  # 4KB limit
	
	# Root location
	location / {
		root web/www;
		index index.html;
		allow_methods GET POST DELETE HEAD;
		autoindex on;
	}
}
