# Test configuration demonstrating multiple listen directives
# and IP Port creation during parsing

# Server with multiple listen directives - should create 3 IpPorts
server {
	listen 8080;
	listen 8081;
	listen 127.0.0.1:8082;
	server_name multi-port-server;
	client_max_body_size 1000000;
	
	error_page 404 /error_pages/404.html;
	
	location / {
		root web/www;
		index index.html;
		allow_methods GET POST DELETE;
		autoindex on;
	}
}

# Two servers sharing the same port - should add both to the same IpPort
server {
	listen 9090;
	server_name first-vhost.example.com;
	client_max_body_size 500000;
	
	location / {
		root web/www;
		index index.html;
		allow_methods GET;
		autoindex off;
	}
}

server {
	listen 9090;
	server_name second-vhost.example.com;
	client_max_body_size 500000;
	
	location / {
		root web/www;
		index index.html;
		allow_methods GET POST;
		autoindex off;
	}
}

# Single server with one listen directive  
server {
	listen 127.0.0.1:8083;
	server_name localhost-specific-server;
	client_max_body_size 2000000;
	
	location / {
		root web/www;
		index index.html;
		allow_methods GET POST DELETE;
		autoindex on;
	}
}
